# 简单的运行说明

## 1 建议的运行顺序

1. Zookeeper Server（在 2181 端口）
2. Master（在 9090 端口）
3. RegionServer （在 9091 端口）
4. Front（默认在 8081 端口）

> 其实后三个可以打乱

## 2 预期准备

### 2.1 Zookeeper 持久化目录创建

- 需要手动创建以下持久化节点（内容空着不用填）：

    ```text
    - region1
        - tables
        - slaves
    - region2
        - tables
        - slaves
    ```

- 因为单机上跑只有一个 slave，建议测试时手动创建以下节点：

    ```text
    # 目前策略仅允许在 >= master + 2 * slave 情况下进行写操作
    - region1
        - slaves
            - 随便啥名字 "RegionIP:Port"
            - 随便啥名字 "RegionIP:Port"
    ```

### 2.2 MySQL

目前只需要创建一个名为 `distributed` 的 database 就行

## 3 其他

### 3.1 配置修改

1. Front

    - 该端口号的命令忘记了，随缘

2. Master & RegionServer

    - 数据库 & 默认端口号 都在 `\src\main\resources\application.yml` 中配置
    - 相信大家一眼就能看到！

> master 端口号动了之后需要手动改前端项目的所有 `localhost:9090` 请求路径
>
> 属于是懒得优化了

### 3.2 前端操作

1. 首次加载会自动向 Master 请求一次 Meta 信息

    - 有空的朋友可以搞个定时函数啥的

    - 之后就纯手动更新（懒得用消息订阅通知 App 组件重新调用函数了）

2. Create Table

    - 不知道为啥字符串需要用 ` 这个东西包裹（单引号好像会一直报错）
    - option 实际不起作用（似乎一往里塞就报错）

3. Select 选的表和填的表不一样有一定几率报错（恰好在同一台机子上就没问题）

4. Else 中只会返回 成功/失败

> 没了，懒得写了

